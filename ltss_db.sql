/*!40101 SET NAMES utf8mb4 */;

DROP DATABASE IF EXISTS ltss_db_test;
CREATE DATABASE ltss_db_test;
use ltss_db_test;

CREATE TABLE user(
    uid INT AUTO_INCREMENT, 
    email VARCHAR(128) NOT NULL, 
    pwd VARCHAR(32) NOT NULL, 
    PRIMARY KEY (uid)
);

CREATE TABLE driver(
    did INT AUTO_INCREMENT,
    name VARCHAR(32) NOT NULL,
    lpnum VARCHAR(8) UNIQUE,
    contact VARCHAR(11) UNIQUE,
    lat VARCHAR(17),
    lon VARCHAR(17),
    uid INT NOT NULL,
    PRIMARY KEY (did),
    FOREIGN KEY (uid) REFERENCES user(uid) ON DELETE CASCADE
);

CREATE TABLE task(
    tid INT AUTO_INCREMENT, 
    dep_name VARCHAR(128) NOT NULL,
    dep_address VARCHAR(128), 
    dest_name VARCHAR(128) NOT NULL, 
    dest_address VARCHAR(128),
    dep_time_min TIMESTAMP, 
    dep_time_max TIMESTAMP, 
    dest_time_min TIMESTAMP, 
    dest_time_max TIMESTAMP, 
    dep_lat VARCHAR(17), 
    dep_lon VARCHAR(17),
    dest_lat VARCHAR(17), 
    dest_lon VARCHAR(17), 
    t_time INT, 
    r_date TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    uid INT NOT NULL, 
    PRIMARY KEY (tid), 
    FOREIGN KEY (uid) 
    REFERENCES user(uid) ON DELETE CASCADE
);


CREATE TABLE place(
    pid INT AUTO_INCREMENT, 
    name VARCHAR(128), 
    adress VARCHAR(128),
    lon VARCHAR(17) NOT NULL, 
    lat VARCHAR(17) NOT NULL, 
    count INT DEFAULT 0,
    PRIMARY KEY (pid)
);

INSERT INTO user (email, pwd) VALUES ('test@test.com', '0000');

INSERT INTO place (name, adress, lon, lat) VALUES 
('평택서부두', '경기 평택시 포승읍 신영리 671', '126.885935193061', '36.9390447587094'),
('인천2부두', '인천 중구 항동7가 1-33', '126.627288990714', '37.4626643817422'),
('인천대한제분', '인천 중구 북성동1가 4', '126.615780440948', '37.4789213031288'),
('음성피그넷', '충북 음성군 금왕읍 오선리 218-3', '127.563147905719', '36.9795239385309'),
('광양제일로지스', '전남 광양시 도이동 852', '127.668536364038', '34.91498191067057'),
('용인한일사료', '경기 용인시 기흥구 하갈동 213', '127.099061572871', '37.259340653753'),
('생극오뚜기제유', '충북 음성군 생극면 병암리 771', '127.60636371066957', '37.02153784093465');

INSERT INTO driver (lpnum, lon, lat) VALUES 
('5847', '127.68384335535283', '34.92266657442493'),
('6258', '127.69337542017766', '34.74925824566878'),
('6337', '126.38192822336427', '34.80288226756954'),
('6374', '126.76037602514754', '35.01824284064417'),
('6377', '129.06873512270215', '35.12385670818628'),
('6434', '129.07120670265041', '35.11837144575708'),
('6482', '129.0546604665966', '35.11984270319406'),
('6491', '129.3585933005933', '35.58865202117519'),
('6508', '129.49288742810268', '35.76131981320343'),
('6515', '129.2344110182812', '35.82861021791112'),
('6521', '129.4024092901574', '36.01018050034525'),
('6522', '127.52894168176515', '36.609257781329745'),
('6524', '127.54178887877448', '36.707242208063505'),
('6528', '126.63378388580522', '36.88640324618445'),
('6561', '127.11717627134432', '36.8537492352596'),
('6569', '127.10217270165664', '37.03830635171048'),
('6587', '126.85193797900745', '37.215298677015596'),
('6607', '126.61219531930351', '37.44282427273637'),
('6651', '127.32005832365458', '37.381505779198115'),
('6682', '127.91071370153296', '37.70912415596021'),
('6695', '128.99032476133982', '37.735530984782095');

